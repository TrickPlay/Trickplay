From 8d282563df7cd235f5d76c06eb15dcd7d354c468 Mon Sep 17 00:00:00 2001
From: "Craig R. Hughes" <craig.git@rungie.com>
Date: Mon, 19 Sep 2011 09:30:00 -0700
Subject: [PATCH] Fix calculation of duration for ClutterState default
 transitions

---
 clutter/clutter-state.c |    9 +++++++--
 1 files changed, 7 insertions(+), 2 deletions(-)

Index: clutter-1.6.18/clutter/clutter-state.c
===================================================================
--- clutter-1.6.18.orig/clutter/clutter-state.c	2012-01-26 16:22:30.198919959 -0800
+++ clutter-1.6.18/clutter/clutter-state.c	2012-01-26 16:22:47.054919949 -0800
@@ -1905,8 +1905,13 @@
   if (target_state != NULL)
     {
       if (source_state_name)
-        ret = GPOINTER_TO_INT (g_hash_table_lookup (target_state->durations,
-                                                    source_state_name));
+        {
+          ret = GPOINTER_TO_INT (g_hash_table_lookup (target_state->durations,
+                                                      source_state_name));
+          if(!ret)
+            ret = GPOINTER_TO_INT (g_hash_table_lookup (target_state->durations,
+                                                        NULL));
+        }
       else
         ret = GPOINTER_TO_INT (g_hash_table_lookup (target_state->durations,
                                                     NULL));
