Index: clutter-1.6.18/clutter/egl/clutter-backend-egl.c
===================================================================
--- clutter-1.6.18.orig/clutter/egl/clutter-backend-egl.c	2012-01-26 16:22:30.442919965 -0800
+++ clutter-1.6.18/clutter/egl/clutter-backend-egl.c	2012-01-26 16:22:35.030919968 -0800
@@ -55,6 +55,9 @@
 
 static gchar *clutter_vblank_name = NULL;
 
+extern NativeWindowType tp_egl_get_native_window();
+extern NativeDisplayType tp_egl_get_native_display();
+
 #ifdef COGL_HAS_X11_SUPPORT
 G_DEFINE_TYPE (ClutterBackendEGL, _clutter_backend_egl, CLUTTER_TYPE_BACKEND_X11);
 #else
@@ -121,7 +124,7 @@
                           &backend_egl->egl_version_major,
                           &backend_egl->egl_version_minor);
 #else
-  backend_egl->edpy = eglGetDisplay (EGL_DEFAULT_DISPLAY);
+  backend_egl->edpy = eglGetDisplay (tp_egl_get_native_display());
 
   status = eglInitialize (backend_egl->edpy,
 			  &backend_egl->egl_version_major,
@@ -366,7 +369,7 @@
       backend_egl->egl_surface =
         eglCreateWindowSurface (edpy,
                                 config,
-                                (NativeWindowType) NULL,
+                                tp_egl_get_native_window(),
                                 NULL);
     }
 
